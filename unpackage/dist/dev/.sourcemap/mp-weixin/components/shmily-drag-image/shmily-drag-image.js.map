{"version":3,"sources":["webpack:///D:/lejoyMini/lejoyMiniProgram/components/shmily-drag-image/shmily-drag-image.vue?5d5e","webpack:///D:/lejoyMini/lejoyMiniProgram/components/shmily-drag-image/shmily-drag-image.vue?03d0","webpack:///D:/lejoyMini/lejoyMiniProgram/components/shmily-drag-image/shmily-drag-image.vue?d78e","webpack:///D:/lejoyMini/lejoyMiniProgram/components/shmily-drag-image/shmily-drag-image.vue?69dd","uni-app:///components/shmily-drag-image/shmily-drag-image.vue","webpack:///D:/lejoyMini/lejoyMiniProgram/components/shmily-drag-image/shmily-drag-image.vue?467d","webpack:///D:/lejoyMini/lejoyMiniProgram/components/shmily-drag-image/shmily-drag-image.vue?a438"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0I;AAC1I;AACqE;AACL;AACsC;;;AAGtG;AAC6K;AAC7K,gBAAgB,uLAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,wGAAM;AACR,EAAE,iHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgqB,CAAgB,6qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiDprB;AACA,MADA,kBACA;AACA;AACA,mBADA;AAEA,cAFA;AAGA;AACA,YADA;AAEA,YAFA,EAHA;;AAOA,kBAPA;AAQA,kBARA;AASA,oBATA;AAUA,iBAVA;AAWA,wBAXA;AAYA,qBAZA;;AAcA,GAhBA;AAiBA;AACA;AACA;AACA,iBADA;AAEA;AACA;AACA,OAJA,EAFA;;AAQA;AACA;AACA,kBADA;AAEA,gBAFA,EATA;;AAaA;AACA;AACA,kBADA;AAEA,kBAFA,EAdA;;AAkBA;AACA;AACA,kBADA;AAEA,gBAFA,EAnBA;;AAuBA;AACA;AACA,kBADA;AAEA,iBAFA,EAxBA;;AA4BA;AACA;AACA,kBADA;AAEA,kBAFA,EA7BA;;AAiCA;AACA;AACA,kBADA;AAEA,kBAFA,EAlCA;;AAsCA;AACA;AACA,mBADA;AAEA,oBAFA,EAvCA,EAjBA;;;AA6DA;AACA,cADA,wBACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAPA;AAQA,cARA,wBAQA;AACA;AACA,KAVA,EA7DA;;AAyEA,SAzEA,qBAyEA;AACA;AACA;AACA,GA5EA;AA6EA,SA7EA,qBA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,gBANA,aAMA;AACA;AACA,SARA;AASA,KATA;AAUA;AACA,GA1FA;AA2FA;AACA,YADA,oBACA,CADA,EACA,IADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,wBAFA,gDAEA,GAFA;AAGA;AACA;AACA,eAFA,MAEA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAHA;AAIA,iBALA,EAKA,CALA;AAMA,eAjBA,EAEA;AAgBA,aAlBA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA,KAtCA;AAuCA,UAvCA,kBAuCA,GAvCA,EAuCA,CAvCA,EAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA,OALA,EAKA,CALA;AAMA,KApDA;AAqDA,cArDA,sBAqDA,IArDA,EAqDA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,EAKA,GALA;AAMA,KAlEA;AAmEA,YAnEA,oBAmEA,IAnEA,EAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA,OAPA,EAOA,CAPA;AAQA,KAnFA;AAoFA,gBApFA,wBAoFA,IApFA,EAoFA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,sBAFA;AAGA;AACA;AACA;AACA;AACA,aAFA,EAEA,GAFA;AAGA,WARA;;AAUA,OAdA,MAcA;AACA;AACA;AACA;AACA,KAvGA;AAwGA,cAxGA,wBAwGA;;;;;;;AAOA,KA/GA;AAgHA,cAhHA,wBAgHA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,KA3IA;AA4IA,aA5IA,uBA4IA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,4BADA;AAEA,yCAFA;AAGA;AACA;AACA;AACA;AACA;AACA,WARA;;AAUA;AACA,KA5JA;AA6JA,YA7JA,oBA6JA,KA7JA,EA6JA;AACA;AACA,KA/JA;AAgKA,YAhKA,oBAgKA,IAhKA,EAgKA,KAhKA,EAgKA;AACA,sCADA;AAEA,oBAFA,kDAEA,GAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAHA;AAIA,WAbA,EAEA;AAYA,SAdA;AAeA;AACA;AACA;AACA,KAlLA;AAmLA,cAnLA,sBAmLA,IAnLA,EAmLA,KAnLA,EAmLA;;AAEA;;AAEA,KAvLA;AAwLA,YAxLA,sBAwLA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA;AACA,KAjMA;AAkMA,iBAlMA,yBAkMA,IAlMA,EAkMA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,YAFA;AAGA,YAHA;AAIA,eAJA;AAKA,eALA;AAMA,kBANA;AAOA,kBAPA;AAQA,gBARA;AASA,iBATA;AAUA,kBAVA;AAWA,oCAXA;AAYA,uBAZA;AAaA,sBAbA;AAcA,iBAdA;AAeA,sBAfA;;AAiBA;AACA;AACA;AACA;AACA,KA5NA;AA6NA,WA7NA,qBA6NA,EA7NA;AA8NA,UA9NA,kBA8NA,CA9NA,EA8NA;AACA;AACA,KAhOA;AAiOA,QAjOA,kBAiOA;AACA;AACA;AACA;AACA;AACA,KAtOA,EA3FA,E;;;;;;;;;;;;;ACjDA;AAAA;AAAA;AAAA;AAAquC,CAAgB,urCAAG,EAAC,C;;;;;;;;;;;ACAzvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/shmily-drag-image/shmily-drag-image.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./shmily-drag-image.vue?vue&type=template&id=345cb730&scoped=true&\"\nvar renderjs\nimport script from \"./shmily-drag-image.vue?vue&type=script&lang=js&\"\nexport * from \"./shmily-drag-image.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shmily-drag-image.vue?vue&type=style&index=0&id=345cb730&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"345cb730\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/shmily-drag-image/shmily-drag-image.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=template&id=345cb730&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"con\">\r\n    <movable-area class=\"area\" :style=\"{ height: areaHeight }\" @mouseenter=\"mouseenter\" @mouseleave=\"mouseleave\">\r\n      <block v-for=\"(item, index) in imageList\" :key=\"item.id\">\r\n        <movable-view\r\n          class=\"view\"\r\n          :x=\"item.x\"\r\n          :y=\"item.y\"\r\n          direction=\"all\"\r\n          :damping=\"40\"\r\n          :disabled=\"item.disable\"\r\n          @change=\"onChange($event, item)\"\r\n          @touchstart=\"touchstart(item)\"\r\n          @mousedown=\"touchstart(item)\"\r\n          @touchend=\"touchend(item)\"\r\n          @mouseup=\"touchend(item)\"\r\n          :style=\"{ width: viewWidth + 'px', height: viewWidth + 'px', 'z-index': item.zIndex, opacity: item.opacity }\"\r\n        >\r\n          <view class=\"area-con\" :style=\"{ width: childWidth, height: childWidth, transform: 'scale(' + item.scale + ')' }\">\r\n            <image class=\"pre-image\" :src=\"item.src\" mode=\"aspectFill\"></image>\r\n            <view class=\"del-con\" @click=\"delImage(item, index)\" @touchstart.stop=\"delImageMp(item, index)\" @touchend.stop=\"nothing()\" @mousedown.stop=\"nothing()\" @mouseup.stop=\"nothing()\">\r\n              <view class=\"del-wrap\">\r\n                <image\r\n                  class=\"del-image\"\r\n                  src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMDowNzoyNSAyMTo1NDoyOU4TkJAAAADcSURBVFhH7ZfRCoMwDEXLvkjwwVf/bH/emmAyN6glTW9WBjsgwm28OeCLpj81Sil7zvlJ90UiONS/yY5VogsO6XrBg3IEQ5a/s8vRSWUAKmLqp2w5jz5BiNQEGMo3GbloDLtFXJ1IkaEuhAiiY6gEIqB4yqACSk9piIBiKQ8VUFpLviKg3C2rESKgWERCBZSWiEfgIfffYvrrsAgoISJ3Apy3zuTxcSxLQkV6ykNEPKVQkZEyiAiiZKgDIaC4upACSlcn5fM/+WuDCAHF1E/Z/N9AhkMZnPNDPI+UDjPIXgAQIGjNAAAAAElFTkSuQmCC\"\r\n                ></image>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </movable-view>\r\n      </block>\r\n      <view\r\n        class=\"add\"\r\n        v-if=\"imageList.length < number\"\r\n        :style=\"{ top: add.y, left: add.x, width: viewWidth + 'px', height: viewWidth + 'px' }\"\r\n        @click=\"addImages\"\r\n      >\r\n        <view class=\"add-wrap\" :style=\"{ width: childWidth, height: childWidth }\">\r\n          <image\r\n            style=\"width: 54rpx;height: 54rpx;\"\r\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAABIUlEQVRoQ+2a2w2DMAxFeQzWrsMUbadAsEw3S1CqVgppKwLX8BEOP4iHTXx8uUgWdVXoVhdaV0VhSmf7vr/H8V3XzY6V3P9iD+nYOI5P7/01LMI596AwoZV0TIBXIUWFXhKLFBWYSFGhhxQN6SFFQ5i4ogITKSr0cEVDekjRECauqMBEigq9U7piOk2yAti27SUe5ljlTfPEQ6KZecTvwl4P3ytvOv06R2HDMNzes7+6aRrvnHvtf50L13Lp50rx88zcvNlS3JpwKQ67XyK04nq2nFbk/LqVjin0TvmBNgQ2S4UUDcliHgpMpKjQwxUN6SFFQ5i4ogITKSr0cEVDekjRECauqMAsVoph+hVPtYr5+03p9tbYQ96xrYtT4ootbAJGVxxVTapVswAAAABJRU5ErkJggg==\"\r\n          ></image>\r\n        </view>\r\n      </view>\r\n    </movable-area>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      imageList: [],\r\n      width: 0,\r\n      add: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      colsValue: 0,\r\n      viewWidth: 0,\r\n      tempItem: null,\r\n      timer: null,\r\n      changeStatus: true,\r\n      preStatus: true,\r\n    }\r\n  },\r\n  props: {\r\n    // 返回排序后图片\r\n    list: {\r\n      type: Array,\r\n      default: function() {\r\n        return []\r\n      }\r\n    },\r\n    // 选择图片数量限制\r\n    number: {\r\n      type: Number,\r\n      default: 6\r\n    },\r\n    // 图片父容器宽度（实际显示的图片宽度为 imageWidth / 1.1 ），单位 rpx\r\n    imageWidth: {\r\n      type: Number,\r\n      default: 230\r\n    },\r\n    // 图片列数（cols > 0 则 imageWidth 无效）\r\n    cols: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    // 图片周围空白填充，单位 rpx\r\n    padding: {\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    // 拖动图片时放大倍数 [0, ∞)\r\n    scale: {\r\n      type: Number,\r\n      default: 1.1\r\n    },\r\n    // 拖动图片时不透明度\r\n    opacity: {\r\n      type: Number,\r\n      default: 0.7\r\n    },\r\n    // 自定义添加（需配合 @aaddImage 事件使用）\r\n    custom: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  computed: {\r\n    areaHeight() {\r\n      if (this.imageList.length < this.number) {\r\n        return Math.ceil((this.imageList.length + 1) / this.colsValue) * this.viewWidth + 'px'\r\n      } else {\r\n        return Math.ceil(this.imageList.length / this.colsValue) * this.viewWidth + 'px'\r\n      }\r\n    },\r\n    childWidth() {\r\n      return this.viewWidth - this.rpx2px(this.padding) * 2 + 'px'\r\n    },\r\n  },\r\n  created() {\r\n    this.width = uni.getSystemInfoSync().windowWidth\r\n    this.viewWidth = this.rpx2px(this.imageWidth)\r\n  },\r\n  mounted() {\r\n    const query = uni.createSelectorQuery().in(this)\r\n    query.select('.area').boundingClientRect(data => {\r\n      this.colsValue = Math.floor(data.width / this.viewWidth)\r\n      if(this.cols > 0){\r\n        this.colsValue = this.cols\r\n        this.viewWidth = data.width / this.cols\r\n      }\r\n      for (let item of this.list) {\r\n        this.addProperties(item)\r\n      }\r\n    })\r\n    query.exec()\r\n  },\r\n  methods: {\r\n    onChange(e, item) {\r\n      if(!item) return\r\n      item.oldX = e.detail.x\r\n      item.oldY = e.detail.y\r\n      if (e.detail.source === 'touch') {\r\n        if(item.moveEnd){\r\n          item.offset = Math.sqrt(Math.pow(item.oldX - item.absX * this.viewWidth, 2) + Math.pow(item.oldY - item.absY * this.viewWidth, 2))\r\n        }\r\n        let x = Math.floor((e.detail.x + this.viewWidth / 2) / this.viewWidth)\r\n        if(x >= this.colsValue) return\r\n        let y = Math.floor((e.detail.y + this.viewWidth / 2) / this.viewWidth)\r\n        let index = this.colsValue * y + x\r\n        if (item.index != index && index < this.imageList.length) {\r\n          this.changeStatus = false\r\n          for (let obj of this.imageList) {\r\n            if (item.index > index && obj.index >= index && obj.index < item.index) {\r\n              this.change(obj, 1)\r\n            } else if (item.index < index && obj.index <= index && obj.index > item.index) {\r\n              this.change(obj, -1)\r\n            } else if(obj.id != item.id) {\r\n              obj.offset = 0\r\n              obj.x = obj.oldX\r\n              obj.y = obj.oldY\r\n              setTimeout(() => {\r\n                this.$nextTick(() => {\r\n                  obj.x = obj.absX * this.viewWidth\r\n                  obj.y = obj.absY * this.viewWidth\r\n                })\r\n              }, 0)\r\n            }\r\n          }\r\n          item.index = index\r\n          item.absX = x\r\n          item.absY = y\r\n          this.sortList()\r\n        }\r\n      }\r\n    },\r\n    change(obj, i){\r\n      obj.index += i\r\n      obj.offset = 0\r\n      obj.x = obj.oldX\r\n      obj.y = obj.oldY\r\n      obj.absX = obj.index % this.colsValue\r\n      obj.absY = Math.floor(obj.index / this.colsValue)\r\n      setTimeout(() => {\r\n        this.$nextTick(() => {\r\n          obj.x = obj.absX * this.viewWidth\r\n          obj.y = obj.absY * this.viewWidth\r\n        })\r\n      }, 0)\r\n    },\r\n    touchstart(item) {\r\n      this.imageList.forEach(v => {\r\n        v.zIndex = v.index + 9\r\n      })\r\n      item.zIndex = 99\r\n      item.moveEnd = true\r\n      this.tempItem = item\r\n      this.timer = setTimeout(() => {\r\n        item.scale = this.scale\r\n        item.opacity = this.opacity\r\n        clearTimeout(this.timer)\r\n        this.timer = null\r\n      }, 200)\r\n    },\r\n    touchend(item) {\r\n      this.previewImage(item)\r\n      item.scale = 1\r\n      item.opacity = 1\r\n      item.x = item.oldX\r\n      item.y = item.oldY\r\n      item.offset = 0\r\n      item.moveEnd = false\r\n      setTimeout(() => {\r\n        this.$nextTick(() => {\r\n          item.x = item.absX * this.viewWidth\r\n          item.y = item.absY * this.viewWidth\r\n          this.tempItem = null\r\n          this.changeStatus = true\r\n        })\r\n      }, 0)\r\n    },\r\n    previewImage(item){\r\n      if(this.timer && this.preStatus && this.changeStatus && item.offset < 28.28){\r\n        clearTimeout(this.timer)\r\n        this.timer = null\r\n        let src = this.list.findIndex(v => v === item.src)\r\n        uni.previewImage({\r\n          urls: this.list,\r\n          current: src,\r\n          success: () => {\r\n            this.preStatus = false\r\n            setTimeout(() => {\r\n              this.preStatus = true\r\n            }, 600)\r\n          }\r\n        })\r\n      } else if (this.timer){\r\n        clearTimeout(this.timer)\r\n        this.timer = null\r\n      }\r\n    },\r\n    mouseenter(){\r\n      //#ifdef H5\r\n      this.imageList.forEach(v => {\r\n        v.disable = false\r\n      })\r\n      //#endif\r\n      \r\n    },\r\n    mouseleave(){\r\n      //#ifdef H5\r\n      if(this.tempItem){\r\n        this.imageList.forEach(v => {\r\n          v.disable = true\r\n          v.zIndex = v.index + 9\r\n          v.offset = 0\r\n          v.moveEnd = false\r\n          if(v.id == this.tempItem.id){\r\n            if (this.timer){\r\n              clearTimeout(this.timer)\r\n              this.timer = null\r\n            }\r\n            v.scale = 1\r\n            v.opacity = 1\r\n            v.x = v.oldX\r\n            v.y = v.oldY\r\n            this.$nextTick(() => {\r\n              v.x = v.absX * this.viewWidth\r\n              v.y = v.absY * this.viewWidth\r\n              this.tempItem = null\r\n            })\r\n          }\r\n        })\r\n        this.changeStatus = true\r\n      }\r\n      //#endif\r\n    },\r\n    addImages() {\r\n      if(this.custom){\r\n        this.$emit('addImage')\r\n      } else {\r\n        let checkNumber = this.number - this.imageList.length\r\n        uni.chooseImage({\r\n          count: checkNumber,\r\n          sourceType: ['album', 'camera'],\r\n          success: res => {\r\n            let count = checkNumber <= res.tempFilePaths.length ? checkNumber : res.tempFilePaths.length\r\n            for (let i = 0; i < count; i++) {\r\n              this.addProperties(res.tempFilePaths[i])\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    addImage(image){\r\n      this.addProperties(image)\r\n    },\r\n    delImage(item, index){\r\n      this.imageList.splice(index, 1)\r\n      for (let obj of this.imageList) {\r\n        if (obj.index > item.index) {\r\n          obj.index -= 1\r\n          obj.x = obj.oldX\r\n          obj.y = obj.oldY\r\n          obj.absX = obj.index % this.colsValue\r\n          obj.absY = Math.floor(obj.index / this.colsValue)\r\n          this.$nextTick(() => {\r\n            obj.x = obj.absX * this.viewWidth\r\n            obj.y = obj.absY * this.viewWidth\r\n          })\r\n        }\r\n      }\r\n      this.add.x = (this.imageList.length % this.colsValue) * this.viewWidth + 'px'\r\n      this.add.y = Math.floor(this.imageList.length / this.colsValue) * this.viewWidth + 'px'\r\n      this.sortList()\r\n    },\r\n    delImageMp(item, index){\r\n      //#ifdef MP\r\n      this.delImage(item, index)\r\n      //#endif\r\n    },\r\n    sortList() {\r\n      let list = this.imageList.slice()\r\n      list.sort((a, b) => {\r\n        return a.index - b.index\r\n      })\r\n      for (let i = 0; i < list.length; i++) {\r\n        list[i] = list[i].src\r\n      }\r\n      this.$emit('update:list', list)\r\n    },\r\n    addProperties(item){\r\n      let absX = this.imageList.length % this.colsValue\r\n      let absY = Math.floor(this.imageList.length / this.colsValue)\r\n      let x = absX * this.viewWidth\r\n      let y = absY * this.viewWidth\r\n      this.imageList.push({\r\n        src: item.content,\r\n        x,\r\n        y,\r\n        oldX: x,\r\n        oldY: y,\r\n        absX,\r\n        absY,\r\n        scale: 1,\r\n        zIndex: 9,\r\n        opacity: 1,\r\n        index: this.imageList.length,\r\n        id: this.guid(),\r\n        disable: false,\r\n        offset: 0,\r\n        moveEnd: false\r\n      })\r\n\t  console.log(this.imageList)\r\n      this.add.x = (this.imageList.length % this.colsValue) * this.viewWidth + 'px'\r\n      this.add.y = Math.floor(this.imageList.length / this.colsValue) * this.viewWidth + 'px'\r\n      this.sortList()\r\n    },\r\n    nothing(){},\r\n    rpx2px(v){\r\n      return this.width * v / 750\r\n    },\r\n    guid() {\r\n    \tfunction S4() {\r\n    \t\treturn (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    \t}\r\n    \treturn (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.con {\r\n  padding: 30rpx;\r\n  .area {\r\n    width: 100%;\r\n    .view {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      .area-con {\r\n        position: relative;\r\n        .pre-image {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n        .del-con {\r\n          position: absolute;\r\n          top: 0rpx;\r\n          right: 0rpx;\r\n          padding: 0 0 20rpx 20rpx;\r\n          .del-wrap {\r\n            width: 36rpx;\r\n            height: 36rpx;\r\n            background-color: rgba(0, 0, 0, 0.4);\r\n            border-radius: 0 0 0 10rpx;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            .del-image {\r\n              width: 20rpx;\r\n              height: 20rpx;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .add {\r\n      position: absolute;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      .add-wrap{\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background-color: #eeeeee;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=style&index=0&id=345cb730&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=style&index=0&id=345cb730&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1597848487177\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}